multichain-cli $1 create txfilter destfilter {} 'function filtertransaction() { var tx=getfiltertransaction(); var asset_name=""; var dest_addr=""; var src_addr=""; if (tx.vout[0].hasOwnProperty("assets")) { if (tx.vout[0].assets[0].type=="transfer") {asset_name = tx.vout[0].assets[0].name; var dest_addr=tx.vout[0].scriptPubKey.addresses[0]; src_addr=tx.vout[tx.vout.length-1].scriptPubKey.addresses[0];}} if (verifypermission(src_addr,"activate")) { if (verifypermission(dest_addr, "activate")) {return "University can transfer money only to students";}} else if (asset_name != "") {var asset=getassetinfo(asset_name,true); var dest_addr_asset=asset.details.address; if(dest_addr!=dest_addr_asset) {return "Wrong destination address, must be the multisignature address between High Authority and University";}}}'

multichain-cli $1 approvefrom $address destfilter true

texttxfilter {} 'function filtertransaction() { var tx=getfiltertransaction(); var asset_name=""; var dest_addr=""; var src_addr=""; if (tx.vout[0].hasOwnProperty("assets")) { if (tx.vout[0].assets[0].type=="transfer") {asset_name = tx.vout[0].assets[0].name; var dest_addr=tx.vout[0].scriptPubKey.addresses[0]; src_addr=tx.vout[tx.vout.length-1].scriptPubKey.addresses[0];}} if (verifypermission(src_addr,"activate")) { if (verifypermission(dest_addr, "activate")) {return "University can transfer money only to students";}} else if (asset_name != "") {var asset=getassetinfo(asset_name,true); var dest_addr_asset=asset.details.address; if(dest_addr!=dest_addr_asset) {return "Wrong destination address, must be the multisignature address between High Authority and University";}}}' 278d495346a9e5affbec40a59cce514701adb4ce1d32fd391cf274ca5f4b3b96
